<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  </head>
  <body>
  <div class="container-fluid">
  <form id="orderForm">
  <div class="mb-3 px-3">
    <div class="my-4">Form Pemesanan<div>
    <label class="form-label">Pilihan Paket</label>
    <select name="paket" class="form-select" required>
      <option value="" disabled selected>-- Pilih Paket Obat --</option>
      <option>1 Botol Xerdiove Nakara</option>
      <option>2 Botol Xerdiove Nakara</option>
      <option>3 Botol Xerdiove Nakara</option>
      <option>4 Botol Xerdiove Nakara</option>
      <option>5 Botol Xerdiove Nakara</option>
      <option>6 Botol Xerdiove Nakara</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Nama</label>
    <input type="text" name="nama" class="form-control" placeholder="Masukkan nama lengkap" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Nomor WhatsApp</label>
    <input type="number" name="wa" class="form-control" placeholder="Masukkan Nomor WhatsApp" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Provinsi</label>
    <select name="provinsi" id="provinsi" class="form-select" required>
      <option value="" disabled selected>-- Pilih Provinsi --</option>
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">Kabupaten/Kota</label>
    <select name="kabupaten" id="kabupaten" class="form-select" required>
      <option value="" disabled selected>-- Pilih Kabupaten --</option>
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">Kecamatan</label>
    <select name="kecamatan" id="kecamatan" class="form-select" required>
      <option value="" disabled selected>-- Pilih Kecamatan --</option>
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">Kelurahan/Desa</label>
    <select name="kelurahan" id="kelurahan" class="form-select" required>
      <option value="" disabled selected>-- Pilih Kelurahan --</option>
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">Detail Alamat</label>
    <textarea name="alamat" class="form-control" placeholder="Masukkan Jl / No.Rumah / Patokan" required></textarea>
  </div>

  <div>
    <button type="submit" class="btn btn-primary">Kirim</button>
  </div>
  
</form>

<div id="statusMsg" class="mt-3"></div>

   </div>

  <p id="status"></p>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzB_BtemdhmZv-0rNi7LxGsFB5Yb9NEXCczftf2n_fEvSQfLvFbl-bLsZ-1D_huAZQ8Qw/exec';
    const form = document.getElementById('orderForm');
    const status = document.getElementById('status');

    form.addEventListener('submit', e => {
      e.preventDefault();
      status.textContent = "Mengirim...";

      fetch(scriptURL, { method: 'POST', body: new FormData(form) })
        .then(response => {
          status.textContent = "Data berhasil dikirim!";
          form.reset();
        })
        .catch(error => {
          status.textContent = "Gagal mengirim data.";
          console.error('Error!', error.message);
        });
    });
  </script>
  <script>
    const provinsiSelect = document.getElementById('provinsi');
    const kabupatenSelect = document.getElementById('kabupaten');
    const kecamatanSelect = document.getElementById('kecamatan');
    const kelurahanSelect = document.getElementById('kelurahan');

    // Ambil daftar provinsi
    fetch('https://www.emsifa.com/api-wilayah-indonesia/api/provinces.json')
      .then(res => res.json())
      .then(data => {
        data.forEach(prov => {
          const option = document.createElement('option');
          option.value = prov.id;
          option.text = prov.name;
          provinsiSelect.add(option);
        });
      });

    // Saat provinsi dipilih → ambil kabupaten
    provinsiSelect.addEventListener('change', () => {
      fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/regencies/${provinsiSelect.value}.json`)
        .then(res => res.json())
        .then(data => {
          kabupatenSelect.innerHTML = '';
          kecamatanSelect.innerHTML = '';
          kelurahanSelect.innerHTML = '';
          data.forEach(kab => {
            const option = document.createElement('option');
            option.value = kab.id;
            option.text = kab.name;
            kabupatenSelect.add(option);
          });
        });
    });

    // Saat kabupaten dipilih → ambil kecamatan
    kabupatenSelect.addEventListener('change', () => {
      fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/districts/${kabupatenSelect.value}.json`)
        .then(res => res.json())
        .then(data => {
          kecamatanSelect.innerHTML = '';
          kelurahanSelect.innerHTML = '';
          data.forEach(kec => {
            const option = document.createElement('option');
            option.value = kec.id;
            option.text = kec.name;
            kecamatanSelect.add(option);
          });
        });
    });

    // Saat kecamatan dipilih → ambil kelurahan
    kecamatanSelect.addEventListener('change', () => {
      fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/villages/${kecamatanSelect.value}.json`)
        .then(res => res.json())
        .then(data => {
          kelurahanSelect.innerHTML = '';
          data.forEach(kel => {
            const option = document.createElement('option');
            option.value = kel.id;
            option.text = kel.name;
            kelurahanSelect.add(option);
          });
        });
    });
  </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
  </body>
</html>
